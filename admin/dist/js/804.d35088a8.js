"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[804],{8804:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var i=a(3396);function o(t,e,a,o,r,l){const s=(0,i.up)("AddStaticModal"),n=(0,i.up)("Table");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(s,{visible:r.formVisible,formData:r.formData,mode:t.formMode},null,8,["visible","formData","mode"]),(0,i.Wm)(n,{fields:r.tableFieldNames,postData:l.getStatic,actions:r.dataActions,rows:r.rows,editMode:"form",name:"Статика"},null,8,["fields","postData","actions","rows"])])}var r=a(9242);const l=["validated"],s=(0,i._)("span",null,"Приветствие",-1),n=(0,i._)("span",null,"Корзина",-1);function d(t,e,a,o,d,c){const m=(0,i.up)("CModalTitle"),u=(0,i.up)("CModalHeader"),f=(0,i.up)("QuillEditor"),p=(0,i.up)("CModalBody"),h=(0,i.up)("CButton"),g=(0,i.up)("CModalFooter"),b=(0,i.up)("CModal");return(0,i.wg)(),(0,i.j4)(b,{size:"xl",backdrop:"static",alignment:"center",visible:a.visible,onClose:c.closeModal},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Статические данные")])),_:1})])),_:1}),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i._)("form",{ref:"add-file-form",novalidate:"",validated:d.formValid,onSubmit:e[0]||(e[0]=(0,r.iM)(((...e)=>t.addTag&&t.addTag(...e)),["prevent"])),class:"add-user",style:{display:"'none'"}},[s,(0,i.Wm)(f,{theme:"snow",toolbar:["bold","italic","underline","strike"],ref:"greetingEditor",id:"greetingEditor",placeholder:"Текст приветствия",class:"mb-3"},null,512),n,(0,i.Wm)(f,{theme:"snow",toolbar:"essential",ref:"orderEditor",id:"orderEditor",placeholder:"Текст в корзине"},null,512)],40,l)])),_:1}),(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,{color:"secondary",onClick:c.closeModal},{default:(0,i.w5)((()=>[(0,i.Uk)(" Отменить ")])),_:1},8,["onClick"]),(0,i.Wm)(h,{color:"primary",onClick:c.editStatic},{default:(0,i.w5)((()=>[(0,i.Uk)("Изменить")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible","onClose"])}var c=a(6265),m=a.n(c),u=a(6149),f=a(7123);const p=m().create({withCredentials:!0});var h={components:{QuillEditor:u.Bn},props:{visible:!1,formData:{gitHubLink:"",linkedInLink:"",about:""}},data(){return{formValid:!1}},updated(){this.formValid=!1,this.formData.greeting&&this.$refs.greetingEditor?.setHTML(this.formData.greeting),this.formData.order&&this.$refs.orderEditor?.setHTML(this.formData.order)},methods:{closeModal(){f.Z.$emit("closeModal")},constractFromData(){var t=new FormData;return t.append("greeting",this.$refs.greetingEditor.getHTML()),t.append("order",this.$refs.orderEditor.getHTML()),t},editStatic(){try{const t=this.constractFromData();p.put(this.$store.state.publicPath+"/api/admin/statics",t,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{f.Z.$emit("staticEdited")})).catch((t=>{console.log(t),f.Z.$emit("noresponse",t)}))}catch(t){this.formValid=!0}}}},g=a(89);const b=(0,g.Z)(h,[["render",d]]);var w=b,_=a(7942);const v=m().create({withCredentials:!0});var M={name:"Static",components:{AddStaticModal:w,Table:_.Z},data(){return{myApi:v,formVisible:!1,formData:{},rows:[],dataActions:{"Изменить":{action:this.changeUser,color:"warning"}},tableFieldNames:[{name:"greeting",title:"Приветствие"},{name:"order",title:"Корзина"}]}},created(){f.Z.$on("closeModal",(()=>{this.formVisible=!1,this.formData={}})),f.Z.$on("staticEdited",(()=>{this.formVisible=!1,this.getStatic(),this.formData={}}))},methods:{changeUser(t){this.formVisible=!0,this.formData=t},getStatic(t,e){return!(e>1)&&v.get(this.$store.state.publicPath+"/api/admin/statics/",{perPage:t??0,page:e??0}).then((t=>(this.rows=t.data,t.data))).catch((t=>{f.Z.$emit("noresponse",t)}))}}};const D=(0,g.Z)(M,[["render",o]]);var C=D}}]);
//# sourceMappingURL=804.d35088a8.js.map