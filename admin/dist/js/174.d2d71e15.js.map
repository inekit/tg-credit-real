{"version":3,"file":"js/174.d2d71e15.js","mappings":"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","sources":["webpack://@coreui/coreui-free-vue-admin-template/./src/utils/dateFormatter.js","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Loan.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Loan.vue?a20a"],"sourcesContent":["let options = {\r\n  year: 'numeric',\r\n  month: 'long',\r\n  day: 'numeric',\r\n};\r\n\r\nmodule.exports = {\r\n  dateFormatter: (date) => {\r\n    return new Date(date).toLocaleDateString('ru-RU', options);\r\n  },\r\n  getAgeStr(months) {\r\n    return months > 12 ? `${Math.trunc(months / 12)} лет ${months % 12} месяцев` : `${months} месяцев`;\r\n  },\r\n};\r\n","<template>\r\n    <div>\r\n        <div class=\"card mb-4 order-card\">\r\n            <div>\r\n                ID: {{ loan.id }}\r\n            </div>\r\n            <div>\r\n                Дата создания: {{ dateFormatter(loan.creation_date) }}\r\n            </div>\r\n            <div>\r\n                ID заемщика: {{ loan.user_id }}\r\n            </div>\r\n            <div>\r\n                Юзернейм Телеграм: {{ loan.username ? `@${loan.username}` : \"Нет\" }}\r\n            </div>\r\n            <div>\r\n                ФИО получателя: {{ `${loan.surname} ${loan.name} ${loan.patronymic}` }}\r\n            </div>\r\n            <div>\r\n                Телефон: {{ loan.phone }}\r\n            </div>\r\n            <div>\r\n                Дата рождения: {{ dateFormatter(loan.birth_date) }}\r\n            </div>\r\n            <div v-if=\"loan.passport_photo\" class=\"img-container mb-3\">\r\n                <CInputGroupText>Фото паспорта</CInputGroupText>\r\n                <img :src=\"loan.passport_photo\" />\r\n            </div>\r\n            <div v-if=\"loan.visa_photo\" class=\"img-container mb-3\">\r\n                <CInputGroupText>Фото визы</CInputGroupText>\r\n                <img :src=\"loan.visa_photo\" />\r\n            </div>\r\n            <div>\r\n                Дата окончания визы: {{ dateFormatter(loan.visa_expired_date) }}\r\n            </div>\r\n            <div>\r\n                Сумма займа: {{ loan.sum }}\r\n            </div>\r\n            <div>\r\n                Срок займа (в днях): {{ loan.term_days }}\r\n            </div>\r\n            <div>\r\n                Дата выдачи: {{ dateFormatter(loan.issue_date) }}\r\n            </div>\r\n            <div>\r\n                Дата возврата: {{ dateFormatter(loan.return_date) }}\r\n            </div>\r\n            <div>\r\n                Страна: {{ loan.country }}\r\n            </div>\r\n            <div>\r\n                ID ответственного администратора: {{ loan.aprooved_by_id }}\r\n            </div>\r\n            <div>\r\n                Оценка заемщика: {{ loan.assessment }}\r\n            </div>\r\n            <div>\r\n                Статус: {{ loan.status }}\r\n            </div>\r\n            <div class=\"change-status\">\r\n                <span class=\"w-100 mb-2\">Изменить статус</span>\r\n                <button v-for=\"status in statuses\" :key=\"status\" class=\"btn btn-primary\" @click=\"changeStatus(status)\">{{\r\n                    status }}</button>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport eventBus from '../eventBus'\r\nimport { dateFormatter } from '../utils/dateFormatter';\r\nimport axios from 'axios'\r\nconst myApi = axios.create({\r\n    withCredentials: true,\r\n    credentials: 'include'\r\n\r\n})\r\n\r\nexport default {\r\n    components: {\r\n    },\r\n    props: ['loanId'],\r\n    data() {\r\n        return {\r\n            myApi: myApi,\r\n            formVisible: false,\r\n            formData: {},\r\n            loan: {},\r\n            rows: [],\r\n            statuses: ['Новый', 'Выдан', 'Получен', 'Отменен', 'Запрещен', 'На возврате', 'Закрыт',],\r\n            messageTemplate: null,\r\n            tableFieldNames: [\r\n                {\r\n                    name: 'id',\r\n                    title: 'Артикул',\r\n                },\r\n                {\r\n                    name: 'title',\r\n                    title: 'Название',\r\n                },\r\n                {\r\n                    name: 'option_name',\r\n                    title: 'Опция',\r\n                },\r\n                {\r\n                    name: 'count',\r\n                    title: 'Количество',\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    created() {\r\n        this.get()\r\n    },\r\n    methods: {\r\n        change(elObj) {\r\n            this.formVisible = true\r\n            elObj.tags_array = new Set(elObj.tags_array)\r\n            this.formData = elObj\r\n            console.log(elObj)\r\n            this.formMode = 'edit'\r\n        },\r\n        dateFormatter,\r\n        changeStatus(newStatus) {\r\n            this.$store.state.myApi.put(this.$store.state.publicPath + '/api/admin/loans', {\r\n                id: this.loan.id,\r\n                status: newStatus,\r\n            })\r\n                .then(async () => {\r\n                    this.loan.status = newStatus;\r\n                })\r\n                .catch(e => { eventBus.$emit('noresponse', e) })\r\n        },\r\n\r\n        get() {\r\n            console.log(this.tag)\r\n            return myApi\r\n                .get(this.$store.state.publicPath + '/api/admin/loans/', {\r\n                    params: {\r\n                        id: this.$route.params.loanId,\r\n                    },\r\n                })\r\n                .then((res) => {\r\n                    this.loan = res.data\r\n                })\r\n                .catch((error) => {\r\n                    eventBus.$emit('noresponse', error)\r\n                    return false\r\n                })\r\n        },\r\n    },\r\n}\r\n</script>\r\n  \r\n<style lang=\"scss\">\r\nbutton {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.order-card {\r\n    padding: 1rem;\r\n    font-size: 1.2rem;\r\n\r\n    button {\r\n        margin-bottom: 0 !important;\r\n    }\r\n}\r\n\r\n.change-status {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n\r\n    button {\r\n        width: 150px;\r\n        margin-right: 20px;\r\n        margin-bottom: 20px !important;\r\n    }\r\n}\r\n\r\n.custon-input-part {\r\n    height: 38px !important\r\n}\r\n</style>\r\n  ","import { render } from \"./Loan.vue?vue&type=template&id=300a8bc0\"\nimport script from \"./Loan.vue?vue&type=script&lang=js\"\nexport * from \"./Loan.vue?vue&type=script&lang=js\"\n\nimport \"./Loan.vue?vue&type=style&index=0&id=300a8bc0&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-credit-real\\\\admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["options","year","month","day","module","exports","dateFormatter","date","Date","toLocaleDateString","getAgeStr","months","Math","trunc","class","_createElementVNode","_createElementBlock","_hoisted_1","$data","id","$options","creation_date","user_id","username","surname","name","patronymic","phone","birth_date","passport_photo","_hoisted_2","_createVNode","_component_CInputGroupText","src","visa_photo","_hoisted_4","visa_expired_date","sum","term_days","issue_date","return_date","country","aprooved_by_id","assessment","status","_hoisted_6","_hoisted_7","_Fragment","key","onClick","myApi","axios","withCredentials","credentials","components","props","data","formVisible","formData","loan","rows","statuses","messageTemplate","tableFieldNames","title","created","this","get","methods","change","elObj","tags_array","Set","console","log","formMode","changeStatus","newStatus","$store","state","put","publicPath","then","async","catch","e","eventBus","tag","params","$route","loanId","res","error","__exports__","render"],"sourceRoot":""}