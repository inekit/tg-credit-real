(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[180],{4234:function(t){let a={year:"numeric",month:"long",day:"numeric"};t.exports={dateFormatter:t=>new Date(t).toLocaleDateString("ru-RU",a),getAgeStr(t){return t>12?`${Math.trunc(t/12)} лет ${t%12} месяцев`:`${t} месяцев`}}},5180:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return y}});var n=e(3396),l=e(7139);const o={class:"card mb-4 order-card"},s={key:0,class:"img-container mb-3"},i=["src"],r={key:1,class:"img-container mb-3"},u=["src"],d={class:"change-status"},c=(0,n._)("span",{class:"w-100 mb-2"},"Изменить статус",-1),m=["onClick"];function _(t,a,e,_,p,h){const v=(0,n.up)("CInputGroupText");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",o,[(0,n._)("div",null," ID: "+(0,l.zw)(p.loan.id),1),(0,n._)("div",null," Дата создания: "+(0,l.zw)(h.dateFormatter(p.loan.creation_date)),1),(0,n._)("div",null," ID заемщика: "+(0,l.zw)(p.loan.user_id),1),(0,n._)("div",null," Юзернейм Телеграм: "+(0,l.zw)(p.loan.username?`@${p.loan.username}`:"Нет"),1),(0,n._)("div",null," ФИО получателя: "+(0,l.zw)(`${p.loan.surname} ${p.loan.name} ${p.loan.patronymic}`),1),(0,n._)("div",null," Телефон: "+(0,l.zw)(p.loan.phone),1),(0,n._)("div",null," Дата рождения: "+(0,l.zw)(h.dateFormatter(p.loan.birth_date)),1),p.loan.passport_photo?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Фото паспорта")])),_:1}),(0,n._)("img",{src:p.loan.passport_photo},null,8,i)])):(0,n.kq)("",!0),p.loan.visa_photo?((0,n.wg)(),(0,n.iD)("div",r,[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Uk)("Фото визы")])),_:1}),(0,n._)("img",{src:p.loan.visa_photo},null,8,u)])):(0,n.kq)("",!0),(0,n._)("div",null," Дата окончания визы: "+(0,l.zw)(h.dateFormatter(p.loan.visa_expired_date)),1),(0,n._)("div",null," Сумма займа: "+(0,l.zw)(p.loan.sum),1),(0,n._)("div",null," Срок займа (в днях): "+(0,l.zw)(p.loan.term_days),1),(0,n._)("div",null," Дата выдачи: "+(0,l.zw)(h.dateFormatter(p.loan.issue_date)),1),(0,n._)("div",null," Дата возврата: "+(0,l.zw)(h.dateFormatter(p.loan.return_date)),1),(0,n._)("div",null," Страна: "+(0,l.zw)(p.loan.country),1),(0,n._)("div",null," ID ответственного администратора: "+(0,l.zw)(p.loan.aprooved_by_id),1),(0,n._)("div",null," Оценка заемщика: "+(0,l.zw)(p.loan.assessment),1),(0,n._)("div",null," Статус: "+(0,l.zw)(p.loan.status),1),(0,n._)("div",d,[c,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(p.statuses,(t=>((0,n.wg)(),(0,n.iD)("button",{key:t,class:"btn btn-primary",onClick:a=>h.changeStatus(t)},(0,l.zw)(t),9,m)))),128))])])])}var p=e(7123),h=e(4234),v=e(6265),w=e.n(v);const g=w().create({withCredentials:!0,credentials:"include"});var z={components:{},props:["loanId"],data(){return{myApi:g,formVisible:!1,formData:{},loan:{},rows:[],statuses:["Новый","Выдан","Получен","Отменен","Запрещен","На возврате","Закрыт"],messageTemplate:null,tableFieldNames:[{name:"id",title:"Артикул"},{name:"title",title:"Название"},{name:"option_name",title:"Опция"},{name:"count",title:"Количество"}]}},created(){this.get()},methods:{change(t){this.formVisible=!0,t.tags_array=new Set(t.tags_array),this.formData=t,console.log(t),this.formMode="edit"},dateFormatter:h.dateFormatter,changeStatus(t){this.$store.state.myApi.put(this.$store.state.publicPath+"/api/admin/loans",{id:this.loan.id,status:t}).then((async()=>{this.loan.status=t})).catch((t=>{p.Z.$emit("noresponse",t)}))},get(){return console.log(this.tag),g.get(this.$store.state.publicPath+"/api/admin/loans/",{params:{id:this.$route.params.loanId}}).then((t=>{this.loan=t.data?.[0]})).catch((t=>(p.Z.$emit("noresponse",t),!1)))}}},b=e(89);const f=(0,b.Z)(z,[["render",_]]);var y=f}}]);
//# sourceMappingURL=180.eed2906d.js.map