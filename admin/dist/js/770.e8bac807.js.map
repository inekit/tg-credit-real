{"version":3,"file":"js/770.e8bac807.js","mappings":"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","sources":["webpack://@coreui/coreui-free-vue-admin-template/./src/utils/dateFormatter.js","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Loan.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Loan.vue?a20a"],"sourcesContent":["let options = {\r\n  year: 'numeric',\r\n  month: 'long',\r\n  day: 'numeric',\r\n};\r\n\r\nmodule.exports = {\r\n  dateFormatter: (date) => {\r\n    return new Date(date).toLocaleDateString('ru-RU', options);\r\n  },\r\n  getAgeStr(months) {\r\n    return months > 12 ? `${Math.trunc(months / 12)} лет ${months % 12} месяцев` : `${months} месяцев`;\r\n  },\r\n};\r\n","<template>\r\n    <div>\r\n        <div class=\"card mb-4 order-card\">\r\n            <div>\r\n                ID: {{ loan.id }}\r\n            </div>\r\n            <div>\r\n                Дата создания: {{ dateFormatter(loan.creation_date) }}\r\n            </div>\r\n            <div>\r\n                ID заемщика: {{ loan.user_id }}\r\n            </div>\r\n            <div>\r\n                Юзернейм Телеграм: {{ loan.username ? `@${loan.username}` : \"Нет\" }}\r\n            </div>\r\n            <div>\r\n                ФИО получателя: {{ `${loan.surname} ${loan.name} ${loan.patronymic}` }}\r\n            </div>\r\n            <div>\r\n                Телефон: {{ loan.phone }}\r\n            </div>\r\n            <div>\r\n                Дата рождения: {{ dateFormatter(loan.birth_date) }}\r\n            </div>\r\n            <div v-if=\"loan.passport_photo\" class=\"img-container mb-3\">\r\n                <label>Фото паспорта</label>\r\n                <img :src=\"`${$store.state.publicPath}/public/pics/${loan.passport_photo}`\" />\r\n            </div>\r\n            <div v-if=\"loan.visa_photo\" class=\"img-container mb-3\">\r\n                <label>Фото визы</label>\r\n                <img :src=\"`${$store.state.publicPath}/public/pics/${loan.visa_photo}`\" />\r\n            </div>\r\n            <div>\r\n                Дата окончания визы: {{ dateFormatter(loan.visa_expired_date) }}\r\n            </div>\r\n            <div>\r\n                Сумма займа: {{ loan.sum }}\r\n            </div>\r\n            <div>\r\n                Срок займа (в днях): {{ loan.term_days }}\r\n            </div>\r\n            <div v-if=\"loan.issue_date\">\r\n                Дата выдачи: {{ dateFormatter(loan.issue_date) }}\r\n            </div>\r\n            <div v-if=\"loan.return_date\">\r\n                Дата возврата: {{ dateFormatter(loan.return_date) }}\r\n            </div>\r\n            <div>\r\n                Страна: {{ loan.country }}\r\n            </div>\r\n            <div v-if=\"loan.aprooved_by_id\">\r\n                ID ответственного администратора: {{ loan.aprooved_by_id }}\r\n            </div>\r\n            <div v-if=\"loan.assessment\">\r\n                Оценка заемщика: {{ loan.assessment }}\r\n            </div>\r\n            <div>\r\n                Статус: {{ loan.status }}\r\n            </div>\r\n            <div class=\"change-status\">\r\n                <span class=\"w-100 mb-2\">Изменить статус</span>\r\n                <button v-for=\"status in statuses\" :key=\"status\" class=\"btn btn-primary\" @click=\"changeStatus(status)\">{{\r\n                    status }}</button>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport eventBus from '../eventBus'\r\nimport { dateFormatter } from '../utils/dateFormatter';\r\nimport axios from 'axios'\r\nconst myApi = axios.create({\r\n    withCredentials: true,\r\n    credentials: 'include'\r\n\r\n})\r\n\r\nexport default {\r\n    components: {\r\n    },\r\n    props: ['loanId'],\r\n    data() {\r\n        return {\r\n            myApi: myApi,\r\n            formVisible: false,\r\n            formData: {},\r\n            loan: {},\r\n            rows: [],\r\n            statuses: [],\r\n            messageTemplate: null,\r\n            tableFieldNames: [\r\n                {\r\n                    name: 'id',\r\n                    title: 'Артикул',\r\n                },\r\n                {\r\n                    name: 'title',\r\n                    title: 'Название',\r\n                },\r\n                {\r\n                    name: 'option_name',\r\n                    title: 'Опция',\r\n                },\r\n                {\r\n                    name: 'count',\r\n                    title: 'Количество',\r\n                },\r\n            ],\r\n        }\r\n    },\r\n    async created() {\r\n        await this.get();\r\n        this.printStatuses()\r\n    },\r\n    methods: {\r\n        printStatuses() {\r\n            this.statuses = this.loan.status === 'Новый' ?\r\n                ['Выдан', 'Запрещен'] : this.loan.status === 'На возврате' ? ['Закрыт'] : this.loan.status === 'Выдан' ? ['Получен'] : []\r\n        },\r\n        change(elObj) {\r\n            this.formVisible = true\r\n            elObj.tags_array = new Set(elObj.tags_array)\r\n            this.formData = elObj\r\n            console.log(elObj)\r\n            this.formMode = 'edit'\r\n        },\r\n        dateFormatter,\r\n        changeStatus(newStatus) {\r\n            this.$store.state.myApi.put(this.$store.state.publicPath + '/api/admin/loans', {\r\n                user_id: this.loan.user_id,\r\n                status: newStatus,\r\n            })\r\n                .then(async () => {\r\n                    this.loan.status = newStatus;\r\n                    this.printStatuses()\r\n\r\n                })\r\n                .catch(e => { eventBus.$emit('noresponse', e) })\r\n        },\r\n\r\n        get() {\r\n            console.log(this.tag)\r\n            return myApi\r\n                .get(this.$store.state.publicPath + '/api/admin/loans/', {\r\n                    params: {\r\n                        id: this.$route.params.loanId,\r\n                    },\r\n                })\r\n                .then((res) => {\r\n                    this.loan = res.data?.[0]\r\n                })\r\n                .catch((error) => {\r\n                    eventBus.$emit('noresponse', error)\r\n                    return false\r\n                })\r\n        },\r\n    },\r\n}\r\n</script>\r\n  \r\n<style lang=\"scss\">\r\nbutton {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.order-card {\r\n    padding: 1rem;\r\n    font-size: 1.2rem;\r\n\r\n    button {\r\n        margin-bottom: 0 !important;\r\n    }\r\n}\r\n\r\n.change-status {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n\r\n    button {\r\n        width: 150px;\r\n        margin-right: 20px;\r\n        margin-bottom: 20px !important;\r\n    }\r\n}\r\n\r\n.custon-input-part {\r\n    height: 38px !important\r\n}\r\n\r\n.img-container {\r\n    width: 480px;\r\n    overflow: hidden;\r\n\r\n    img {\r\n        width: 100%\r\n    }\r\n}\r\n</style>\r\n  ","import { render } from \"./Loan.vue?vue&type=template&id=1f664918\"\nimport script from \"./Loan.vue?vue&type=script&lang=js\"\nexport * from \"./Loan.vue?vue&type=script&lang=js\"\n\nimport \"./Loan.vue?vue&type=style&index=0&id=1f664918&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-credit-real\\\\admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["options","year","month","day","module","exports","dateFormatter","date","Date","toLocaleDateString","getAgeStr","months","Math","trunc","class","_createElementVNode","_createElementBlock","_hoisted_1","$data","id","$options","creation_date","user_id","username","surname","name","patronymic","phone","birth_date","passport_photo","_hoisted_2","_hoisted_3","src","_ctx","state","publicPath","visa_photo","_hoisted_5","_hoisted_6","visa_expired_date","sum","term_days","issue_date","return_date","country","aprooved_by_id","assessment","status","_hoisted_12","_hoisted_13","_Fragment","key","onClick","myApi","axios","withCredentials","credentials","components","props","data","formVisible","formData","loan","rows","statuses","messageTemplate","tableFieldNames","title","async","this","get","printStatuses","methods","change","elObj","tags_array","Set","console","log","formMode","changeStatus","newStatus","$store","put","then","catch","e","eventBus","tag","params","$route","loanId","res","error","__exports__","render"],"sourceRoot":""}