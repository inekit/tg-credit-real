(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[79],{4234:function(t){let a={year:"numeric",month:"long",day:"numeric"};t.exports={dateFormatter:t=>new Date(t).toLocaleDateString("ru-RU",a),getAgeStr(t){return t>12?`${Math.trunc(t/12)} лет ${t%12} месяцев`:`${t} месяцев`}}},8079:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return C}});var n=e(3396),s=e(7139);const i={class:"card mb-4 order-card"},l={key:0,class:"img-container mb-3"},o=(0,n._)("label",null,"Фото паспорта",-1),r=["src"],u={key:1,class:"img-container mb-3"},d=(0,n._)("label",null,"Фото визы",-1),c=["src"],m={key:2},_={key:3},p={key:4},h={key:5},w={class:"change-status"},v=(0,n._)("span",{class:"w-100 mb-2"},"Изменить статус",-1),g=["onClick"];function b(t,a,e,b,y,k){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",i,[(0,n._)("div",null," ID: "+(0,s.zw)(y.loan.id),1),(0,n._)("div",null," Дата создания: "+(0,s.zw)(k.dateFormatter(y.loan.creation_date)),1),(0,n._)("div",null," ID заемщика: "+(0,s.zw)(y.loan.user_id),1),(0,n._)("div",null," Юзернейм Телеграм: "+(0,s.zw)(y.loan.username?`@${y.loan.username}`:"Нет"),1),(0,n._)("div",null," ФИО получателя: "+(0,s.zw)(`${y.loan.surname} ${y.loan.name} ${y.loan.patronymic}`),1),(0,n._)("div",null," Телефон: "+(0,s.zw)(y.loan.phone),1),(0,n._)("div",null," Дата рождения: "+(0,s.zw)(k.dateFormatter(y.loan.birth_date)),1),y.loan.passport_photo?((0,n.wg)(),(0,n.iD)("div",l,[o,(0,n._)("img",{src:`${t.$store.state.publicPath}/public/pics/${y.loan.passport_photo}`},null,8,r)])):(0,n.kq)("",!0),y.loan.visa_photo?((0,n.wg)(),(0,n.iD)("div",u,[d,(0,n._)("img",{src:`${t.$store.state.publicPath}/public/pics/${y.loan.visa_photo}`},null,8,c)])):(0,n.kq)("",!0),(0,n._)("div",null," Дата окончания визы: "+(0,s.zw)(k.dateFormatter(y.loan.visa_expired_date)),1),(0,n._)("div",null," Сумма займа: "+(0,s.zw)(y.loan.sum),1),(0,n._)("div",null," Срок займа (в днях): "+(0,s.zw)(y.loan.term_days),1),y.loan.issue_date?((0,n.wg)(),(0,n.iD)("div",m," Дата выдачи: "+(0,s.zw)(k.dateFormatter(y.loan.issue_date)),1)):(0,n.kq)("",!0),y.loan.return_date?((0,n.wg)(),(0,n.iD)("div",_," Дата возврата: "+(0,s.zw)(k.dateFormatter(y.loan.return_date)),1)):(0,n.kq)("",!0),(0,n._)("div",null," Страна: "+(0,s.zw)(y.loan.country),1),y.loan.aprooved_by_id?((0,n.wg)(),(0,n.iD)("div",p," ID ответственного администратора: "+(0,s.zw)(y.loan.aprooved_by_id),1)):(0,n.kq)("",!0),y.loan.assessment?((0,n.wg)(),(0,n.iD)("div",h," Оценка заемщика: "+(0,s.zw)(y.loan.assessment),1)):(0,n.kq)("",!0),(0,n._)("div",null," Статус: "+(0,s.zw)(y.loan.status),1),(0,n._)("div",w,[v,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(y.statuses,(t=>((0,n.wg)(),(0,n.iD)("button",{key:t,class:"btn btn-primary",onClick:a=>k.changeStatus(t)},(0,s.zw)(t),9,g)))),128))])])])}var y=e(7123),k=e(4234),$=e(6265),z=e.n($);const D=z().create({withCredentials:!0,credentials:"include"});var f={components:{},props:["loanId"],data(){return{myApi:D,formVisible:!1,formData:{},loan:{},rows:[],statuses:[],messageTemplate:null,tableFieldNames:[{name:"id",title:"Артикул"},{name:"title",title:"Название"},{name:"option_name",title:"Опция"},{name:"count",title:"Количество"}]}},async created(){await this.get(),this.statuses="Новый"===this.loan.status?["Выдан","Запрещен"]:"На возврате"===this.loan.status?["Закрыт"]:"Выдан"===this.loan.status?["Получен"]:[]},methods:{change(t){this.formVisible=!0,t.tags_array=new Set(t.tags_array),this.formData=t,console.log(t),this.formMode="edit"},dateFormatter:k.dateFormatter,changeStatus(t){this.$store.state.myApi.put(this.$store.state.publicPath+"/api/admin/loans",{user_id:this.loan.user_id,status:t}).then((async()=>{this.loan.status=t})).catch((t=>{y.Z.$emit("noresponse",t)}))},get(){return console.log(this.tag),D.get(this.$store.state.publicPath+"/api/admin/loans/",{params:{id:this.$route.params.loanId}}).then((t=>{this.loan=t.data?.[0]})).catch((t=>(y.Z.$emit("noresponse",t),!1)))}}},F=e(89);const q=(0,F.Z)(f,[["render",b]]);var C=q}}]);
//# sourceMappingURL=79.fcfda79a.js.map