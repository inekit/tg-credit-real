"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[954],{7552:function(e,t,s){s.d(t,{Z:function(){return l}});var r=s(3396);const i={class:"search-block"},a=["value"];function n(e,t,s,n,o,c){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("input",{type:"search",value:e.$store.state.searchQuery,onInput:t[0]||(t[0]=(...e)=>c.search&&c.search(...e)),onChange:t[1]||(t[1]=(...e)=>c.openResults&&c.openResults(...e)),placeholder:"Поиск.."},null,40,a)])}s(7658);var o={data(){return{}},mounted(){},methods:{search(e){this.$store.state.searchQuery=e.target.value},openResults(e){"Filters"===this.$route.name&&this.$router.push("/results")}}},c=s(89);const u=(0,c.Z)(o,[["render",n]]);var l=u},954:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var r=s(3396),i=s(7139);const a=(0,r._)("h1",null,"Каталог",-1),n={class:"results-block"},o=["src"];function c(e,t,s,c,u,l){const h=(0,r.up)("searchBlock"),m=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[a,(0,r.Wm)(h),(0,r._)("div",n,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.$store.state.results,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"result-item",key:e.id},[(0,r.Wm)(m,{to:`/items/${e.id}`},{default:(0,r.w5)((()=>[(0,r._)("img",{src:e.img},null,8,o),(0,r._)("h2",null,(0,i.zw)(e.name),1)])),_:2},1032,["to"])])))),128))])],64)}var u=s(7552),l=s(7123),h={components:{searchBlock:u.Z},data(){return{results:[{id:1,title:"Объект 1",link:"https://google.com",img:""}]}},watch:{"$store.state.searchQuery":function(){this.sendSearchRequest()}},mounted(){window.Telegram.WebApp.MainButton.hide(),window.Telegram.WebApp.MainButton.disable(),window.Telegram.WebApp.BackButton.show(),console.log(this.$route.params);const e=this.$route.params?.page,t=this.$route.params?.filter;this.city=this.$route.params?.city,"2"===e?this.property_class=t:"3"===e?this.commissioning_year=t:"1"===e?(this.sale_percent_min=this.$store.state.filters.find((t=>e==t.id))?.values.find((e=>e.max==t))?.min,this.sale_percent_max=t):"4"===e&&(this.meter_price_min=this.$store.state.filters.find((t=>e==t.id))?.values.find((e=>e.max==t))?.min,this.meter_price_max=t),this.sendSearchRequest()},methods:{sendSearchRequest(){this.$store.state.myApi.get(this.$store.state.restAddr+"/items",{params:{property_class:this.property_class,sale_percent_min:this.sale_percent_min,sale_percent_max:this.sale_percent_max,commissioning_year:this.commissioning_year,meter_price_min:this.meter_price_min,meter_price_max:this.meter_price_max,searchQuery:this.$store.state.searchQuery,city:this.city}}).then((e=>this.$store.state.results=e.data)).catch((e=>{l.Z.$emit("noresponse",e)}))}}},m=s(89);const p=(0,m.Z)(h,[["render",c]]);var _=p}}]);
//# sourceMappingURL=954.c775b8ad.js.map