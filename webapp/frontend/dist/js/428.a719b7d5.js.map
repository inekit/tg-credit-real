{"version":3,"file":"js/428.a719b7d5.js","mappings":"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","sources":["webpack://@coreui/coreui-free-vue-admin-template/./src/views/Order.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Order.vue?7012"],"sourcesContent":["<template>\r\n    <h1>Оформление заказа</h1>\r\n    <div class=\"order-block\">\r\n        <button class=\"\" @click=\"order\" hidden>Оформить заказ</button>\r\n        <div v-html=\"orderText\"></div>\r\n        <div v-if=\"false\">\r\n            <p>Расчет доставки\r\n                производится в ручную из-за индивидуальности\r\n                заказов.</p>\r\n            <p>Средняя стоимость доставки не превышает\r\n                350р. </p>\r\n            <p>После оплаты заказа, вы получите расчет стоимости\r\n                доставки, и сможете оплатить ее при получении.</p>\r\n            <p>Если Вы хотите, чтобы мы произвели расчет до оплаты заказа,\r\n                напишите нам из главного меню по кнопке «Чат с нами»</p>\r\n        </div>\r\n        <div class=\"delivery\">\r\n            <h2>Способ доставки</h2>\r\n            <div class=\"select-group\">\r\n                <div v-for=\"dm in                                                                deliveryMethods                                                               \"\r\n                    :key=\"dm\">\r\n                    <input type=\"radio\" :id=\"dm\" :value=\"dm\" v-model=\"selected_dm\" @change=\"getDeliveryPrice\">\r\n                    <label :for=\"dm\" @click=\"selected_dm = dm; getDeliveryPrice()\">{{ dm }}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"payment\">\r\n            <h2>Способ оплаты</h2>\r\n            <div class=\"select-group\">\r\n                <div v-for=\"                                                             po                                                              in                                                              paymentOptions                                                               \"\r\n                    :key=\" po \">\r\n                    <input type=\"radio\" :id=\" po \" :value=\" po \" v-model=\" selected_po \">\r\n                    <label :for=\" po \" @click=\" selected_po = po \">{{ po }}</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <h2>Получатель</h2>\r\n        <div class=\"input-group\">\r\n            <input type=\"text\" id=\"name\" name=\"name\" placeholder=\"Имя\" v-model=\" basketData.name \">\r\n            <input type=\"text\" id=\"surname\" name=\"surname\" placeholder=\"Фамилия\" v-model=\" basketData.surname \">\r\n            <input type=\"text\" id=\"patronymic\" name=\"patronymic\" placeholder=\"Отчество\" v-model=\" basketData.patronymic \">\r\n            <input type=\"tel\" id=\"phone\" name=\"phone\" placeholder=\"Телефон\" v-model=\" basketData.phone \">\r\n            <input type=\"text\" id=\"address\" name=\"address\" placeholder=\"Адрес доставки\" v-model=\" basketData.address \"\r\n                @input=\" getDeliveryPrice \">\r\n            <input type=\"number\" id=\"text\" pattern=\"[0-9]+\" name=\"postal code\" placeholder=\"Почтовый индекс\"\r\n                v-model.number=\" basketData.postal_code \" @input=\" getDeliveryPricePostal \">\r\n        </div>\r\n        <h2>Промокод</h2>\r\n        <div class=\"input-group one-line\">\r\n            <input type=\"text\" id=\"name\" name=\"name\" class=\"form-control\" placeholder=\"Введите промокод\"\r\n                v-model=\" basketData.promo_code \">\r\n            <button class=\"button-append\" type=\"button\" @click=\" getPromoSale \">Применить</button>\r\n        </div>\r\n        <h2 class=\"total\">Итого</h2>\r\n        <div class=\"pricing\">Стоимость доставки<span>{{ deliveryPrice!==null ? `${ deliveryPrice } ₽` : \"Не определена\"\r\n                }}</span>\r\n        </div>\r\n        <div class=\"pricing\" v-if=\" sale.sum > 0 \">Скидка<span>{{ sale.type === 'money' ? `${ sale.sum } ₽` : `${ sale.sum }\r\n                        % `\r\n                }}</span></div>\r\n        <div class=\"pricing\">К оплате<span>{{ totalSum }} ₽</span></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport eventBus from '../eventBus'\r\nimport { ListLoader, InstagramLoader } from 'vue-content-loader'\r\nimport { min } from 'moment';\r\n\r\n\r\nexport default {\r\n    components: { InstagramLoader },\r\n    data() {\r\n        return {\r\n            basketData: {},\r\n            paymentOptions: [\"Перевод\"],\r\n            selected_po: \"Перевод\",\r\n            deliveryMethods: [\"CДЭК\", 'Метро', 'Внутри МКАД', 'МО за МКАД'],\r\n            selected_dm: \"CДЭК\",\r\n            deliveryPrice: this.deliveryPrice,\r\n            deliveryTime: null,\r\n            sale: {\r\n                sum: 0\r\n            },\r\n            orderText: null,\r\n        }\r\n    },\r\n    watch: {\r\n        selected_dm(to) {\r\n            if (to === 'CДЭК') {\r\n                this.selected_po = \"Перевод\";\r\n                this.paymentOptions = [\"Перевод\"];\r\n            } else this.paymentOptions = [\"Перевод\", \"Наличные курьеру\"];\r\n        }\r\n    },\r\n    async beforeMount() {\r\n        window.Telegram?.WebApp.BackButton.onClick(this.routeBack);\r\n        window.Telegram?.WebApp.BackButton.show();\r\n\r\n        window.Telegram?.WebApp.MainButton.onClick(this.order);\r\n        window.Telegram?.WebApp.MainButton.enable();\r\n        window.Telegram?.WebApp.MainButton.show();\r\n        window.Telegram?.WebApp.MainButton.setText(\"Заказ подтверждаю\");\r\n        this.orderText = await this.getOrderText()\r\n        this.basketData = await this.getBasketData()\r\n        await this.getDeliveryPrice()\r\n\r\n\r\n    },\r\n    async beforeUnmount() {\r\n        window.Telegram?.WebApp.MainButton.offClick(this.order);\r\n        window.Telegram?.WebApp.MainButton.hide();\r\n        window.Telegram?.WebApp.BackButton.offClick(this.routeBack);\r\n        window.Telegram?.WebApp.BackButton.hide();\r\n    },\r\n    methods: {\r\n        order() {\r\n            if (!this.basketData.address || !this.basketData.phone ||\r\n                !this.basketData.name || !this.basketData.surname || !this.basketData.patronymic\r\n                || !this.basketData.postal_code)\r\n                return alert(\"Пожалуйста, заполните все поля\")\r\n            //if (!this.deliveryPrice) return alert(\"Пожалуйста, укажите верные данные для доставки\")\r\n\r\n            this.$store.state.myApi\r\n                .post(this.$store.state.restAddr + '/orders', {\r\n                    user_id: this.$store.state.userId,\r\n                    address: this.basketData.address,\r\n                    selected_dm: this.selected_dm,\r\n                    selected_po: this.selected_po,\r\n                    phone: this.basketData.phone,\r\n                    name: this.basketData.name,\r\n                    surname: this.basketData.surname,\r\n                    postal_code: this.basketData.postal_code,\r\n                    patronymic: this.basketData.patronymic,\r\n                    promo_code: this.sale.code,\r\n                    delivery_price: 0,\r\n                    delivery_time: this.deliveryTime,\r\n                    total: this.totalSum\r\n                })\r\n                .then(async (response) => {\r\n                    window.Telegram?.WebApp.disableClosingConfirmation()\r\n                    window.Telegram?.WebApp.close();\r\n                })\r\n                .catch(e => { eventBus.$emit('noresponse', e) })\r\n        },\r\n        async getDeliveryPrice() {\r\n            if (this.selected_dm !== \"CДЭК\") {\r\n                switch (this.selected_dm) {\r\n                    case ('Метро'):\r\n                        return this.deliveryPrice = this.totalSum >= 5000 ? 0 : 200;\r\n                    case ('Внутри МКАД'):\r\n                        return this.deliveryPrice = this.totalSum >= 5000 ? 0 : 350;\r\n                    case ('МО за МКАД'):\r\n                        return this.deliveryPrice = this.totalSum >= 7000 ? 0 : null;\r\n                }\r\n\r\n            }\r\n\r\n            const results = await this.$store.state.myApi.get(this.$store.state.restAddr + '/delivery_price', {\r\n                params: {\r\n                    operator: this.selected_dm,\r\n                    address: this.basketData.address,\r\n                    count: this.basketData.total_count,\r\n                    postal_code: this.basketData.postal_code,\r\n                }\r\n            })\r\n                .then(response => {\r\n                    this.deliveryPrice = response.data?.price ?? null;\r\n                    this.deliveryTime = response.data?.time ?? null;\r\n                })\r\n                .catch(e => { console.log(e); this.deliveryPrice = null; this.deliveryTime = null })\r\n\r\n            return results ?? {}\r\n\r\n        },\r\n        getDeliveryPricePostal() {\r\n            if ([0, 6].includes(this.basketData.postal_code?.toString()?.length ?? 0)) this.getDeliveryPrice()\r\n            else { this.deliveryPrice = null; this.deliveryTime = null }\r\n        },\r\n        routeBack() {\r\n            this.$router.go(-1)\r\n        },\r\n        async getBasketData() {\r\n            const results = await this.$store.state.myApi.get(this.$store.state.restAddr + '/basket_data', {\r\n                params: {\r\n                    user_id: this.$store.state.userId,\r\n                }\r\n            })\r\n                .then(response => {\r\n                    return response.data;\r\n                })\r\n                .catch(e => { eventBus.$emit('noresponse', e) })\r\n\r\n            return results ?? {}\r\n\r\n        },\r\n        async getPromoSale() {\r\n            const results = await this.$store.state.myApi.get(this.$store.state.restAddr + '/promos', {\r\n                params: {\r\n                    code: this.basketData.promo_code,\r\n                    user_id: this.$store.state.userId,\r\n\r\n                }\r\n            })\r\n                .then(response => {\r\n                    const sale = response.data\r\n                    alert(`Промокод на ${sale.sum} ${sale.type === 'money' ? \"рублей\" : \"%\"} успешно активирован`)\r\n                    return this.sale = response.data ?? { sum: 0 };\r\n                })\r\n                .catch(e => { this.sale = { sum: 0 }; alert(\"Промокод недействителен\") })\r\n\r\n            return results ?? {}\r\n\r\n        },\r\n        async getOrderText() {\r\n            return await this.$store.state.myApi\r\n                .get(this.$store.state.restAddr + '/statics', {\r\n                    perPage: 0,\r\n                    page: 0,\r\n                })\r\n                .then((res) => {\r\n                    return res.data?.[0]?.order\r\n                })\r\n                .catch((error) => {\r\n                    eventBus.$emit('noresponse', error)\r\n                })\r\n        },\r\n    },\r\n    computed: {\r\n        totalSum() {\r\n            const basketTotal = +(this.sale.type === 'money' ? Math.max((this.basketData.total - this.sale.sum), 0) :\r\n                (+(100 - this.sale.sum) * this.basketData.total / 100).toFixed(0))\r\n\r\n            return basketTotal;// + (+this.deliveryPrice ?? 0)\r\n        }\r\n\r\n    }\r\n}\r\n</script>\r\n  \r\n\r\n<style lang=\"scss\">\r\n.order-block {\r\n    color: #414141;\r\n    padding: 0 1rem 1rem 1rem;\r\n\r\n    input[type=\"radio\"] {\r\n        -webkit-appearance: none;\r\n        appearance: none;\r\n        background-color: #E6E6E6;\r\n        margin: 0;\r\n        font: inherit;\r\n        width: 100%;\r\n        height: 45px;\r\n        border-radius: 1rem;\r\n        border: none;\r\n        transform: translateY(-0.075em);\r\n\r\n        display: grid;\r\n        place-content: center;\r\n    }\r\n\r\n    input[type=\"radio\"]::before {\r\n        content: \"\";\r\n        width: 120px;\r\n        height: 45px;\r\n        z-index: 999;\r\n        border-radius: 1rem;\r\n        transform: scale(0);\r\n        transition: 120ms transform ease-in-out;\r\n        box-shadow: none;\r\n        background-color: #0071e3;\r\n        width: calc(50vw - 1rem - 5px);\r\n    }\r\n\r\n    input[type=\"radio\"]:checked::before {\r\n        transform: scale(1);\r\n    }\r\n\r\n    input[type=\"radio\"]:focus {\r\n        outline: none;\r\n        outline-offset: max(2px, 0.15em);\r\n    }\r\n}\r\n\r\n.payment {}\r\n\r\n.delivery {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.select-group {\r\n    display: flex;\r\n    gap: 10px;\r\n    flex-wrap: wrap;\r\n\r\n    &>div {\r\n        position: relative;\r\n        display: inline-block;\r\n        width: calc(50vw - 1rem - 5px);\r\n    }\r\n\r\n    label {\r\n        display: block;\r\n        position: absolute;\r\n        margin: 12.5px auto;\r\n        line-height: 20px;\r\n        z-index: 999;\r\n        color: white;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        width: fit-content;\r\n        color: #414141\r\n    }\r\n\r\n    input[type=\"radio\"]:checked+label {\r\n        color: white;\r\n    }\r\n}\r\n\r\n\r\n\r\n.input-group {\r\n\r\n    &.one-line {\r\n\r\n        input,\r\n        button {\r\n            display: inline-block;\r\n            background-color: #e6e6e6;\r\n            padding: 17px 20px;\r\n            border-radius: 1rem;\r\n            border: none;\r\n            margin-bottom: 10px;\r\n            font-size: 1rem;\r\n            width: calc(60% - 40px);\r\n            border-radius: 1rem 4px 4px 1rem;\r\n        }\r\n\r\n        button {\r\n            width: 40%;\r\n            border-left: 2px solid;\r\n            border-radius: 4px 1rem 1rem 4px;\r\n            border-color: white;\r\n            color: #414141 !important;\r\n\r\n        }\r\n    }\r\n\r\n\r\n    position: relative;\r\n\r\n    input {\r\n        background-color: #E6E6E6;\r\n        padding: 17px 20px;\r\n        width: calc(100% - 40px);\r\n        border-radius: 1rem;\r\n        border: none;\r\n        margin-bottom: 10px;\r\n        font-size: 1rem;\r\n    }\r\n\r\n    margin-bottom: -10px\r\n}\r\n\r\n.total {}\r\n\r\n.pricing {\r\n    position: relative;\r\n    font-size: 1.2rem;\r\n    margin-bottom: 10px;\r\n\r\n    span {\r\n        display: block;\r\n        position: absolute;\r\n        right: 0;\r\n        top: 0;\r\n    }\r\n}\r\n</style>\r\n  ","import { render } from \"./Order.vue?vue&type=template&id=1a1a5062\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=1a1a5062&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-vapeshop\\\\webapp\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_hoisted_1","_hoisted_2","onClick","$options","hidden","innerHTML","$data","_hoisted_10","_hoisted_11","_hoisted_12","_createElementBlock","_Fragment","dm","key","type","id","value","onChange","for","_hoisted_15","_hoisted_16","_hoisted_17","po","_hoisted_20","_hoisted_21","name","placeholder","surname","patronymic","phone","address","onInput","pattern","postal_code","_hoisted_22","_hoisted_23","promo_code","_hoisted_24","_hoisted_25","sum","_hoisted_26","_hoisted_27","components","InstagramLoader","data","basketData","paymentOptions","selected_po","deliveryMethods","selected_dm","deliveryPrice","this","deliveryTime","sale","orderText","watch","to","async","window","Telegram","WebApp","BackButton","routeBack","show","MainButton","order","enable","setText","getOrderText","getBasketData","getDeliveryPrice","offClick","hide","methods","alert","$store","state","myApi","post","restAddr","user_id","userId","code","delivery_price","delivery_time","total","totalSum","then","disableClosingConfirmation","close","catch","e","eventBus","results","get","params","operator","count","total_count","response","price","time","console","log","getDeliveryPricePostal","includes","toString","length","$router","go","perPage","page","res","error","computed","basketTotal","Math","max","toFixed","__exports__","render"],"sourceRoot":""}